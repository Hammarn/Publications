{# Accounts table page. #}

{% extends "base.html" %}

{% block header_css %}
{% include 'datatables_css.html' %}
{% end %}

{% block head_title %}Accounts{% end %}

{% block body_title %}
<span class="glyphicon glyphicon-user"></span>
<span class="glyphicon glyphicon-list-alt"></span>
Accounts
{% end %}

{% block main_content %}
<table id="accounts" class="table table-striped table-condensed">
  <thead>
    <tr>
      <th>Account</th>
      <th>Name</th>
      <th>Role</th>
      <th width="25%">Login</th>
    </tr>
  </thead>
  <tbody>
    {% for account in accounts %}
    <tr>
      <td>
	<a href="{{ reverse_url('account', account['email']) }}">
	  {{ account['email'] }}
	</a>
      </td>
      <td>{{ account.get('name') or '-' }}</td>
      <td>{{ account['role'] }}</td>
      <td class="nobr" width="25%">
	{% if account.get('login') %}
	<span class="localtime">{{ account['login'] }}</span>
	{% else %}
	-
	{% end %}
      </td>
    </tr>
    {% end %}
  </tbody>
</table>
{% end %}

{% block javascript_code %}
{% include 'datatables_js.html' %}
<script>
  $(document).ready(function() {
  $('#accounts').DataTable();
  } );
</script>
{% end %}
