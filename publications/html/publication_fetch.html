{# Fetch publication given its DOI or PMID. #}

{% extends "base.html" %}

{% block head_title %}Fetch publication{% end %}

{% block body_title %}
<span class="glyphicon glyphicon-file"></span>
<span class="glyphicon glyphicon-cloud-download"></span>
Fetch publication
{% end %} {# block body_title #}

{% block main_content %}
<p>
  Fetch a publication reference from:
  <ul>
    <li>
      <a href="https://www.ncbi.nlm.nih.gov/pubmed">PubMed</a>
      using a PubMed identifier (PMID), e.g. <strong>25613900</strong>.
    </li>
    <li>
      <a href="https://www.crossref.org/">Crossref</a>
      using a Digital Object Identifier (DOI), e.g.
      <strong>10.1126/science.1260419</strong>.
    </li>
  </ul>
</p>
<form action="{{ reverse_url('publication_fetch') }}"
      role="form"
      class="form-horizontal"
      method="POST">
  {% module xsrf_form_html() %}
  <div class="form-group">
    <label class="col-sm-1 control-label" for="identifier">Identifier</label>
    <div class="col-sm-8">
      {% try %}
      {% set id = identifier %}
      {% except NameError %}
      {% set id = '' %}
      {% end %}
      <input type="text" class="form-control"
	     name="identifier" id="identifier"
	     value="{{ id }}">
    </div>
    <div class="col-sm-3">
      <button type="submit" class="btn btn-success">
	<span class="glyphicon glyphicon-cloud-download"></span>
	Fetch
      </button>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-1 control-label" for="force">Force</label>
    <div class="col-sm-8 checkbox">
      <label>
	<input type="checkbox" name="force" id="force" value="true">
	Force fetch, even if the publication was trashed at some earlier time.
      </label>
    </div>
  </div>
</form>
{% end %} {# block main_content #}

{% block sub_content %}
<h3>Recently modified publications</h3>
{% include 'publications_list.html' %}
{% end %} {# block sub_content #}

{% block meta_content %}
<form action="{{ reverse_url('home') }}"
      role="form"
      method="GET">
  <div class="form-group">
    <label class="control-label"></label>
    <button type="submit" class="btn btn-default">
      <span class="glyphicon glyphicon-ban-circle"></span>
      Cancel
    </button>
  </div>
</form>
{% end %} {# block meta_content #}
